@using CooksRUs.Shared
@page "/search"

<PageTitle>Search</PageTitle>

<header>
    <h1>🔍 Look For Recipes Here!</h1>
    <div class="search-wrapper">
        <input type="text" id="search-bar" class="search-input" placeholder="Search for a recipe..." />
        <button class="search-button" id="search-btn">Search 😋</button>
    </div>
</header>

<main class="container">
    @if (SearchResults.Count == 0 && SearchedOnce)
    {
        <p>No recipes found.</p>
    }
    else
    {
        <div class="recipe-grid">
            @foreach (var r in SearchResults)
            {
                <RecipeCard Title="@r.Title"
                            Description="@r.Description"
                            ImageUrl="@r.ImageUrl"
                            ShowSaveButton="true"
                            OnSaveClicked="@(() => Save(r))" />
            }
        </div>
    }
</main>

<footer class="footer-flex">
    <p>&copy; 2025 Cooks R Us. All rights reserved.</p>
</footer>

@code {
    string SearchQuery { get; set; } = "";
    bool SearchedOnce = false;

    List<Recipe> SearchResults = new();

    void PerformSearch()
    {
        SearchedOnce = true;

        SearchResults = MockData
            .Where(r => r.Title.Contains(SearchQuery, StringComparison.OrdinalIgnoreCase))
            .ToList();
    }



    List<Recipe> MockData = new()
    {
        new Recipe{Title="Pancakes", Description="Fluffy, easy pancakes.", ImageUrl="img/pancakes.jpg"},
        new Recipe{Title="Salad Bowl", Description="Fresh greens with dressing.", ImageUrl="img/salad.jpg"}
    };

    void Save(Recipe r)
    {
        // placeholder
    }

    public class Recipe { public string? Title; public string? Description; public string? ImageUrl; }
}
