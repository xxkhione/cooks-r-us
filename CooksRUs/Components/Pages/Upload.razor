@using CooksRUs.Shared

@page "/upload"

<PageTitle>Upload</PageTitle>

<header>
    <h1>Share Your Recipe! 🌎</h1>
</header>


<h2>Your Uploaded Recipes 📤</h2>

<div class="container">
    @foreach(var r in uploaded)
    {
        <RecipeCard Title="@r.recepie_name" Description="@r.directions" ImageURL="@r.image"
                    ShowEditControls="true"
                    OnEdit="() => EditRecipe(r)"
                    OnDelete="() => DeleteRecipe(r)" />
    }
</div>

@code {
    List<recepie> uploaded = new();
    Recipe newRecipe = new();

    void EditRecipe(recepie r){
        // future backend popup/edit page
    }

    void DeleteRecipe(recepie r){
        dbContext.recepies.Remove(r);
        dbContext.SaveChangesAsync();
    }
}
